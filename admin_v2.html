<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BarberCloud Admin v2</title>

  <link rel="stylesheet" href="./admin_v2.css" />
</head>
<body>
  <!-- LOGIN OVERLAY -->
  <div class="modal-backdrop" id="loginBackdrop" style="display:none;">
    <div class="modal">
      <div class="modal-head">
        <div>
          <h2 style="margin:0">Entrar al Admin</h2>
          <p class="muted" style="margin:6px 0 0">Us√° tu cuenta due√±a</p>
        </div>
      </div>

      <div class="modal-body">
        <label class="label">Email</label>
        <input class="input" id="loginEmail" placeholder="tu@email.com" />

        <label class="label">Contrase√±a</label>
        <input class="input" id="loginPassword" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />

        <div class="row" style="margin-top:12px; gap:10px;">
          <button class="btn" id="btnLogin">Entrar</button>
          <button class="ghost-btn" id="btnLoginClose">Cerrar</button>
        </div>

        <div class="hint" id="loginError" style="display:none;"></div>
      </div>
    </div>
  </div>

  <!-- MODAL GENERICO -->
  <div class="modal-backdrop" id="modalBackdrop" style="display:none;">
    <div class="modal">
      <div class="modal-head">
        <div>
          <h2 id="modalTitle" style="margin:0">Modal</h2>
          <p class="muted" id="modalSubtitle" style="margin:6px 0 0"></p>
        </div>
        <button class="icon-btn" id="btnModalClose" title="Cerrar">‚úï</button>
      </div>

      <div class="modal-body" id="modalBody"></div>

      <div class="modal-foot">
        <button class="ghost-btn" id="btnModalCancel">Cancelar</button>
        <button class="btn" id="btnModalOk">Guardar</button>
      </div>
    </div>
  </div>

  <div class="app">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="brand">
        <div class="avatar" id="shopAvatar">B</div>
        <div class="brand-text">
          <div class="shop-name" id="shopName">BarberCloud</div>
          <div class="shop-sub" id="shopCity">Admin</div>
        </div>
      </div>

      <div class="progress-card">
        <div class="progress-title">Configuraci√≥n de empresa</div>
        <div class="progress-row">
          <div class="progress-bar"><span id="setupBar"></span></div>
          <div class="progress-pct" id="setupPct">0%</div>
        </div>
      </div>

      <button class="btnAddAppointment" id="btnQuickAdd">+ Agregar turno</button>

      <nav class="nav">
        <a href="#/agenda" class="nav-item" data-route="agenda">Agenda</a>
        <a href="#/clientes" class="nav-item" data-route="clientes">Clientes</a>
        <a href="#/servicios" class="nav-item" data-route="servicios">Servicios</a>
        <a href="#/horarios" class="nav-item" data-route="horarios">Plantilla Horaria</a>
        <a href="#/config" class="nav-item" data-route="config">Configuraci√≥n</a>
      </nav>

      <div class="sidebar-footer">
        <button class="ghost-btn" id="btnLogout">Salir</button>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <header class="topbar">
        <div class="top-left">
          <h1 id="pageTitle">Agenda</h1>
          <p class="muted" id="pageSubtitle">Gestion√° tus turnos</p>
        </div>

        <div class="top-right">
          <button class="icon-btn" title="Recargar" id="btnReload">‚ü≥</button>
          <button class="icon-btn" title="Login" id="btnOpenLogin">üîë</button>
        </div>
      </header>

      <section class="content">
        <!-- AGENDA -->
        <div class="view" id="view-agenda">
          <div class="card">
            <div class="card-head">
              <div class="tabs">
                <button class="tab active" data-tab="list">Lista</button>
                <button class="tab" data-tab="calendar">Calendario</button>
              </div>

              <div class="filters">
                <input class="input" id="qAppointments" placeholder="Buscar por nombre o tel√©fono..." />
                <select class="input" id="statusFilter">
                  <option value="">Todos</option>
                  <option value="pending">Pendientes</option>
                  <option value="confirmed">Confirmados</option>
                  <option value="canceled">Cancelados</option>
                </select>
                <input class="input" type="date" id="fromDate" />
                <input class="input" type="date" id="toDate" />
                <button class="btn" id="btnApplyFilters">Filtrar</button>
              </div>
            </div>

            <div class="card-body">
              <div class="table-wrap">
                <table class="table" id="appointmentsTable">
                  <thead>
                    <tr>
                      <th>Fecha</th>
                      <th>Hora</th>
                      <th>Servicio</th>
                      <th>Cliente</th>
                      <th>Tel√©fono</th>
                      <th>Estado</th>
                      <th class="right">Acciones</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>

              <div class="empty" id="appointmentsEmpty" style="display:none;">
                No ten√©s turnos para este rango.
              </div>
            </div>
          </div>
        </div>

        <!-- SERVICIOS -->
        <div class="view" id="view-servicios" style="display:none;">
          <div class="card">
            <div class="card-head">
              <div>
                <h2>Servicios</h2>
                <p class="muted">Gestion√° tus servicios (precio, duraci√≥n, se√±a)</p>
              </div>
              <div class="actions">
                <button class="btn" id="btnNewService">+ Nuevo servicio</button>
              </div>
            </div>

            <div class="card-body" id="servicesGrid" style="display:grid; gap:12px;"></div>
          </div>
        </div>

        <!-- HORARIOS -->
        <div class="view" id="view-horarios" style="display:none;">
          <div class="card">
            <div class="card-head">
              <div>
                <h2>Plantilla Horaria</h2>
                <p class="muted">Scaffolding primero (lo implementamos despu√©s)</p>
              </div>
              <div class="actions">
                <button class="btn" id="btnSaveSchedule">Guardar</button>
              </div>
            </div>
            <div class="card-body" id="scheduleForm">
              <div class="muted">Ac√° va la plantilla (siguiente paso).</div>

              <!-- ‚úÖ NUEVO: Bloqueos / Vacaciones (arriba del grid de d√≠as) -->
              <div class="card" style="margin-bottom:14px">
                <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
                  <div>
                    <h3 style="margin:0">Bloqueos / Vacaciones</h3>
                    <p class="muted" style="margin:6px 0 0">Bloque√° d√≠as completos o franjas horarias (se refleja en el booking).</p>
                  </div>
                  <button class="btn primary" id="btnAddBlock">+ Nuevo bloqueo</button>
                </div>

                <div id="blocksList" style="margin-top:12px"></div>
              </div>
              <!-- /‚úÖ NUEVO -->

              <!-- (Tu grid de d√≠as ya existente ir√≠a abajo. No lo toqu√©.) -->
            </div>
          </div>
        </div>

        <!-- CONFIG -->
        <div class="view" id="view-config" style="display:none;">
          <div class="card">
            <div class="card-head">
              <div>
                <h2>Configuraci√≥n</h2>
                <p class="muted">Datos generales + se√±a por defecto</p>
              </div>
              <div class="actions">
                <button class="btn" id="btnSaveConfig">Guardar</button>
              </div>
            </div>

            <div class="card-body">
              <label class="label">Nombre</label>
              <input class="input" id="cfgName" />

              <label class="label">Ciudad</label>
              <input class="input" id="cfgCity" />

              <label class="label">Direcci√≥n</label>
              <input class="input" id="cfgAddress" />

              <label class="label">Tel√©fono</label>
              <input class="input" id="cfgPhone" />

              <label class="label">Slug (tu link p√∫blico)</label>
              <input class="input" id="cfgSlug" placeholder="barberrami" />

              <label class="label">Se√±a por defecto (%)</label>
              <input class="input" id="cfgDepositPct" type="number" min="0" max="100" step="1" />

              <div class="hint">
                ‚ö†Ô∏è La comisi√≥n fija (platformFee) es interna: la barber√≠a NO la ve ni la puede cambiar.
              </div>
            </div>
          </div>
        </div>

        <!-- CLIENTES -->
        <div class="view" id="view-clientes" style="display:none;">
          <div class="card">
            <div class="card-head">
              <div>
                <h2>Clientes</h2>
                <p class="muted">Placeholder por ahora</p>
              </div>
            </div>
            <div class="card-body">
              <div class="muted">La armamos despu√©s de Agenda + Servicios.</div>
            </div>
          </div>
        </div>

      </section>
    </main>
  </div>

  <script src="./config.js"></script>
  <script src="./admin_v2.js"></script>
</body>
</html>
